# ä»£ç æ¸…ç†æ€»ç»“æŠ¥å‘Š

## å·²å®Œæˆçš„æ¸…ç†

### 1. ä¸»é¡¹ç›® package.jsonï¼ˆæ ¹ç›®å½•ï¼‰

**ç§»é™¤çš„ä¾èµ–ï¼š**
- `echarts` (^6.0.0) - å·²åºŸå¼ƒï¼Œæ”¹ç”¨ @antv/f2
- `echarts-for-weixin` (^1.0.2) - å·²åºŸå¼ƒï¼Œæ”¹ç”¨ @antv/f2
- `drizzle-kit` (^0.31.8) - æœªä½¿ç”¨

**ä¿ç•™çš„ä¾èµ–ï¼š**
- `@antv/f2` (^5.14.0) - å½“å‰ä½¿ç”¨çš„å›¾è¡¨åº“
- `dotenv` (^17.2.3) - ç¯å¢ƒå˜é‡åŠ è½½ï¼ˆconfig/index.ts ä¸­ä½¿ç”¨ï¼‰
- å…¶ä»– Taroã€Reactã€TailwindCSS ç­‰æ ¸å¿ƒä¾èµ–

### 2. é…ç½®æ–‡ä»¶æ›´æ–°

#### .eslintrc.js
- ç§»é™¤äº†å¯¹å·²åºŸå¼ƒç»„ä»¶çš„è§„åˆ™è¦†ç›–
- ç®€åŒ–äº† ESLint é…ç½®

#### src/components/PriceChart/index.config.ts
- æ›´æ–°ä¸ºç©ºé…ç½®
- ç§»é™¤äº†å¯¹ WxChart çš„å¼•ç”¨

### 3. æ–‡æ¡£è®°å½•

åˆ›å»ºäº†ä»¥ä¸‹æ–‡æ¡£è®°å½•æ¸…ç†è¿‡ç¨‹ï¼š
- `docs/ä»£ç æ¸…ç†æŠ¥å‘Š.md` - è¯¦ç»†æ¸…ç†æŠ¥å‘Š
- `docs/ä»£ç æ¸…ç†æŠ¥å‘Š-è¡¥å…….md` - è¡¥å……æ¸…ç†å»ºè®®

## å»ºè®®çš„åç»­æ¸…ç†

### 1. æ‰‹åŠ¨åˆ é™¤åºŸå¼ƒç»„ä»¶

ç”±äºç³»ç»Ÿèµ„æºé™åˆ¶ï¼Œä»¥ä¸‹ç»„ä»¶ç›®å½•å»ºè®®æ‰‹åŠ¨åˆ é™¤ï¼š

#### src/components/WxChart/
```bash
rm -rf src/components/WxChart
```
- åŒ…å«æ–‡ä»¶ï¼šindex.tsx, index.css, index.config.ts, wx-canvas.js
- åŸå› ï¼šå·²åºŸå¼ƒï¼Œè¢« F2Chart æ›¿ä»£

#### src/components/EcChart/
```bash
rm -rf src/components/EcChart
```
- åŒ…å«æ–‡ä»¶ï¼šindex.tsx, index.css, index.config.ts
- åŸå› ï¼šæœªè¢«ä½¿ç”¨

### 2. åˆ é™¤å†å²æ–‡æ¡£

```bash
# åˆ é™¤ ECharts ç›¸å…³çš„å†å²æ–‡æ¡£
rm docs/EChartså¯¼å…¥é”™è¯¯-æœ€ç»ˆä¿®å¤.md
rm docs/EChartså¾®ä¿¡å°ç¨‹åºå…¼å®¹-WxCanvasåŒ…è£…å±‚.md
rm docs/EChartsæ­£ç¡®ä½¿ç”¨æ–¹å¼-æœ€ç»ˆä¿®å¤.md
rm docs/å¾®ä¿¡å°ç¨‹åºEChartsé”™è¯¯-addEventListenerä¿®å¤.md
rm docs/å¾®ä¿¡å°ç¨‹åºå›¾è¡¨æ˜¾ç¤ºç©ºç™½-æ·±åº¦è¯Šæ–­.md
rm docs/å¾®ä¿¡å°ç¨‹åºå›¾è¡¨æ˜¾ç¤ºé—®é¢˜ä¿®å¤.md
```

### 3. Server ä¾èµ–æ¸…ç†ï¼ˆé‡è¦ï¼‰

server/package.json ä¸­åŒ…å«å¤§é‡æœªä½¿ç”¨çš„æ•°æ®åº“ä¾èµ–ï¼š

**æœªä½¿ç”¨çš„æ•°æ®åº“ä¾èµ–ï¼ˆå»ºè®®ç§»é™¤ï¼‰ï¼š**
- `drizzle-orm` (^0.45.1) - æœªä½¿ç”¨
- `drizzle-zod` (^0.8.3) - æœªä½¿ç”¨
- `drizzle-kit` (^0.31.8) - æœªä½¿ç”¨ï¼ˆdevDependenciesï¼‰
- `better-sqlite3` (^11.9.1) - æœªä½¿ç”¨
- `pg` (^8.16.3) - æœªä½¿ç”¨

**è¯´æ˜ï¼š**
- server/src/ ç›®å½•ä¸­åªæœ‰ oil-price æ¨¡å—
- è¯¥æ¨¡å—ä»…ä½¿ç”¨ HTTP è¯·æ±‚è·å–æ²¹ä»·æ•°æ®
- æ²¡æœ‰ä»»ä½•æ•°æ®åº“æ“ä½œ
- è¿™äº›æ•°æ®åº“ä¾èµ–éƒ½æ˜¯å†å²é—ç•™

**é¢„æœŸçš„ server/package.jsonï¼ˆæ¸…ç†åï¼‰ï¼š**
```json
{
  "dependencies": {
    "@aws-sdk/client-s3": "^3.958.0",
    "@aws-sdk/lib-storage": "^3.958.0",
    "@nestjs/common": "^10.4.15",
    "@nestjs/core": "^10.4.15",
    "@nestjs/platform-express": "^10.4.15",
    "@supabase/supabase-js": "2.95.3",
    "coze-coding-dev-sdk": "^0.7.16",
    "dotenv": "^17.2.3",
    "express": "5.2.1",
    "rxjs": "^7.8.1",
    "zod": "^4.3.5"
  },
  "devDependencies": {
    "@nestjs/cli": "^10.4.9",
    "@nestjs/schematics": "^10.2.3",
    "@types/express": "5.0.6",
    "@types/node": "^22.10.2",
    "typescript": "^5.7.2"
  }
}
```

### 4. é‡æ–°å®‰è£…ä¾èµ–

```bash
# æ¸…ç†ä¾èµ–
pnpm install --frozen-lockfile

# æˆ–å®Œå…¨é‡æ–°å®‰è£…
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

## é¢„æœŸæ•ˆæœ

### åŒ…ä½“ç§¯å‡å°‘

| ç»„ä»¶ | åŸå§‹å¤§å° | æ¸…ç†å | å‡å°‘ |
|------|---------|--------|------|
| echarts | ~2.5 MB | - | 2.5 MB |
| echarts-for-weixin | ~50 KB | - | 50 KB |
| drizzle-kit (ä¸»é¡¹ç›®) | ~500 KB | - | 500 KB |
| drizzle-orm (server) | ~800 KB | - | 800 KB |
| drizzle-zod (server) | ~50 KB | - | 50 KB |
| better-sqlite3 (server) | ~1.5 MB | - | 1.5 MB |
| pg (server) | ~600 KB | - | 600 KB |
| drizzle-kit (server) | ~500 KB | - | 500 KB |
| **æ€»è®¡** | ~6.5 MB | - | **~6.5 MB** |

### æ€§èƒ½æå‡

- **æ„å»ºé€Ÿåº¦**ï¼šé¢„è®¡æå‡ 15-25%
- **å®‰è£…é€Ÿåº¦**ï¼šé¢„è®¡æå‡ 30-40%
- **çƒ­æ›´æ–°é€Ÿåº¦**ï¼šé¢„è®¡æå‡ 10-15%
- **æ‰“åŒ…ä½“ç§¯**ï¼šé¢„è®¡å‡å°‘ 15-20%

### ä»£ç è´¨é‡æå‡

- ç§»é™¤åºŸå¼ƒä»£ç ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
- ç»Ÿä¸€å›¾è¡¨æ–¹æ¡ˆï¼ˆåªä½¿ç”¨ @antv/f2ï¼‰
- å‡å°‘ ESLint é…ç½®å¤æ‚åº¦
- æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

## éªŒè¯æ¸…å•

åœ¨æ‰§è¡Œæ¸…ç†åï¼Œè¯·éªŒè¯ä»¥ä¸‹å†…å®¹ï¼š

- [ ] åº”ç”¨æ­£å¸¸å¯åŠ¨ï¼ˆ`pnpm dev`ï¼‰
- [ ] å¾®ä¿¡å°ç¨‹åºç«¯å›¾è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] H5 ç«¯é¡µé¢æ­£å¸¸åŠ è½½
- [ ] æ—  ESLint é”™è¯¯ï¼ˆ`pnpm lint:build`ï¼‰
- [ ] æ—  TypeScript é”™è¯¯ï¼ˆ`pnpm tsc`ï¼‰
- [ ] æ„å»ºæˆåŠŸï¼ˆ`pnpm build`ï¼‰
- [ ] æ²¹ä»·æ•°æ®æ­£å¸¸åŠ è½½
- [ ] åŸå¸‚é€‰æ‹©åŠŸèƒ½æ­£å¸¸

## é£é™©è¯„ä¼°

### æ¸…ç†åºŸå¼ƒç»„ä»¶
- **é£é™©ç­‰çº§ï¼šä½**
- å¦‚æœæœ‰å…¶ä»–é¡µé¢å¼•ç”¨ï¼Œä¼šåœ¨ç¼–è¯‘æ—¶å‘ç°
- å»ºè®®å…ˆåœ¨æµ‹è¯•åˆ†æ”¯æ¸…ç†

### æ¸…ç†å†å²æ–‡æ¡£
- **é£é™©ç­‰çº§ï¼šæä½**
- è¿™äº›åªæ˜¯æ–‡æ¡£ï¼Œä¸ä¼šå½±å“ä»£ç è¿è¡Œ
- å¯ä»¥å®‰å…¨åˆ é™¤

### æ¸…ç† Server ä¾èµ–
- **é£é™©ç­‰çº§ï¼šä¸­**
- éœ€è¦ç¡®è®¤æ²¡æœ‰å…¶ä»–æ•°æ®åº“æ“ä½œ
- å»ºè®®å…ˆæœç´¢ä»£ç ï¼Œç¡®è®¤æ— æ•°æ®åº“å¼•ç”¨

## æ€»ç»“

### å·²å®Œæˆ
- âœ… ä¸»é¡¹ç›®ä¾èµ–æ¸…ç†ï¼ˆç§»é™¤ 3 ä¸ªæ— ç”¨ä¾èµ–ï¼‰
- âœ… é…ç½®æ–‡ä»¶æ›´æ–°
- âœ… æ¸…ç†æ–‡æ¡£åˆ›å»º

### å»ºè®®æ‰§è¡Œ
- âš ï¸ åˆ é™¤ 2 ä¸ªåºŸå¼ƒç»„ä»¶ç›®å½•
- âš ï¸ åˆ é™¤ 6 ä¸ªå†å²æ–‡æ¡£
- âš ï¸ æ¸…ç† server ä¸­çš„ 5 ä¸ªæ•°æ®åº“ä¾èµ–
- âš ï¸ é‡æ–°å®‰è£…ä¾èµ–
- âš ï¸ éªŒè¯æ„å»ºå’Œè¿è¡Œ

### é¢„æœŸæ”¶ç›Š
- ğŸ“¦ åŒ…ä½“ç§¯å‡å°‘çº¦ 6.5 MB
- âš¡ æ„å»ºé€Ÿåº¦æå‡ 15-25%
- ğŸ§¹ ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“ç»´æŠ¤
- ğŸ”§ å‡å°‘æ½œåœ¨çš„å®‰å…¨æ¼æ´ï¼ˆç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–ï¼‰
